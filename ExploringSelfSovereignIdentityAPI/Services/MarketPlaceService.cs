using ExploringSelfSovereignIdentityAPI.Models.Request;
using ExploringSelfSovereignIdentityAPI.Services.NetheriumBlockChain;
using MediatR;
using Nethereum.ABI.FunctionEncoding.Attributes;
using Nethereum.Contracts;
using Nethereum.Contracts.ContractHandlers;
using Nethereum.Contracts.DeploymentHandlers;
using Nethereum.Web3;
using Org.BouncyCastle.Asn1.Mozilla;
using Org.BouncyCastle.Asn1.Ocsp;
using System;
using System.Collections.Generic;
using System.Numerics;
using System.Threading.Tasks;
using Attribute = ExploringSelfSovereignIdentityAPI.Services.NetheriumBlockChain.Attribute;

namespace ExploringSelfSovereignIdentityAPI.Services
{
    public class MarketPlaceService : IMarketPlaceService
    {

        /*static string url = "http://127.0.0.1:8545";
        static string privateKey = "734674bd34f2476f15c6d5f6c8c1c7c92e465921e546771d088b958607531d10";
        private readonly string senderAddress = "0x8A1f48B91fbDC94b82E1997c2630466c5FaCf38b";
        private static string contractAddress = "0x7D6FAec0a4833Ad806EBCbe7d1BFe66caCF0a961";

        static Web3 web3 = new Web3(new Nethereum.Web3.Accounts.Account(privateKey), url);

        private ContractHandler contractHandler = web3.Eth.GetContractHandler(contractAddress);

        public MarketPlaceService()
        {
            web3.TransactionManager.UseLegacyAsDefault = true;
        }*/

        private static string url = "http://testchain.nethereum.com:8545";
        private static string privateKey = "0x7580e7fb49df1c861f0050fae31c2224c6aba908e116b8da44ee8cd927b990b0";
        static Web3 web3 = new Web3(new Nethereum.Web3.Accounts.Account(privateKey, 444444444500), url);

        private ContractHandler contractHandler;

        private async Task<ContractHandler> deploy()
        {
            var marketPlaceDeployment = new MarketPlaceDeployment();

            var transactionReceiptDeployment = await web3.Eth.GetContractDeploymentHandler<MarketPlaceDeployment>().SendRequestAndWaitForReceiptAsync(marketPlaceDeployment);
            var contractAddress = transactionReceiptDeployment.ContractAddress;
            
            return web3.Eth.GetContractHandler(contractAddress);
        }

        public async Task<string> addDataPack(AddDataPackRequest request)
        {

            if (contractHandler == null) contractHandler = await deploy();

            var addDataPackFunction = new AddDataPackFunction();
            addDataPackFunction.Request = request;
            var addDataPackFunctionTxnReceipt = await contractHandler.SendRequestAndWaitForReceiptAsync(addDataPackFunction);

            return "success";
        }

        public async Task<string> buyData(BuyDataRequest request)
        {
            if (contractHandler == null) contractHandler = await deploy();

            var buyDataFunction = new BuyDataFunction();
            buyDataFunction.Request = request;
            var buyDataFunctionTxnReceipt = await contractHandler.SendRequestAndWaitForReceiptAsync(buyDataFunction);

            return "success";
        }

        public async Task<string> createOrganization(CreateOrgRequest request)
        {
            if (contractHandler == null) contractHandler = await deploy();

            var createOrganizationFunction = new CreateOrganizationFunction();
            createOrganizationFunction.Request = request;
            var createOrganizationFunctionTxnReceipt = await contractHandler.SendRequestAndWaitForReceiptAsync(createOrganizationFunction);

            return "success";
        }

        public async Task<GetOrganizationOutputDTO> getOrganization(CreateOrgRequest request)
        {
            if (contractHandler == null) contractHandler = await deploy();

            var getOrganizationFunction = new GetOrganizationFunction();
            getOrganizationFunction.Request = request;
            var getOrganizationOutputDTO = await contractHandler.QueryDeserializingToObjectAsync<GetOrganizationFunction, GetOrganizationOutputDTO>(getOrganizationFunction);

            return getOrganizationOutputDTO;
        }
    }

    public partial class MarketPlaceDeployment : MarketPlaceDeploymentBase
    {
        public MarketPlaceDeployment() : base(BYTECODE) { }
        public MarketPlaceDeployment(string byteCode) : base(byteCode) { }
    }

    public class MarketPlaceDeploymentBase : ContractDeploymentMessage
    {
        public static string BYTECODE = "0x608060405234801561001057600080fd5b506121ad806100206000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c806373001f8014610051578063804a18b8146100815780638d0f9c681461009d578063ddb31638146100b9575b600080fd5b61006b60048036038101906100669190611433565b6100d5565b60405161007891906118b3565b60405180910390f35b61009b60048036038101906100969190611b2b565b6109ea565b005b6100b760048036038101906100b29190611433565b610ef0565b005b6100d360048036038101906100ce9190611d4d565b610fb6565b005b6100dd6111ca565b6100e56111ca565b6101a08360200151600085600001516040516101019190611dd2565b9081526020016040518091039020600101805461011d90611e18565b80601f016020809104026020016040519081016040528092919081815260200182805461014990611e18565b80156101965780601f1061016b57610100808354040283529160200191610196565b820191906000526020600020905b81548152906001019060200180831161017957829003601f168201915b505050505061119f565b6101eb576040518060400160405280600681526020017f6661696c656400000000000000000000000000000000000000000000000000008152508160400181905250809150506109e5565b826000015181600001819052506040518060400160405280600781526020017f737563636573730000000000000000000000000000000000000000000000000081525081604001819052506000836000015160405161024a9190611dd2565b908152602001604051809103902060020154816020018181525050600080846000015160405161027a9190611dd2565b90815260200160405180910390206003015490508067ffffffffffffffff8111156102a8576102a7611271565b5b6040519080825280602002602001820160405280156102e157816020015b6102ce6111f2565b8152602001906001900390816102c65790505b50826060018190525060005b818110156109de57600085600001516040516103099190611dd2565b90815260200160405180910390206004016000828152602001908152602001600020600001805461033990611e18565b80601f016020809104026020016040519081016040528092919081815260200182805461036590611e18565b80156103b25780601f10610387576101008083540402835291602001916103b2565b820191906000526020600020905b81548152906001019060200180831161039557829003601f168201915b5050505050836060015182815181106103ce576103cd611e49565b5b602002602001015160000181905250600085600001516040516103f19190611dd2565b90815260200160405180910390206004016000828152602001908152602001600020600101548360600151828151811061042e5761042d611e49565b5b602002602001015160200181815250508167ffffffffffffffff81111561045857610457611271565b5b60405190808252806020026020018201604052801561049157816020015b61047e611213565b8152602001906001900390816104765790505b50836060015182815181106104a9576104a8611e49565b5b60200260200101516040018190525060005b600086600001516040516104cf9190611dd2565b90815260200160405180910390206004016000838152602001908152602001600020600401548110156109ca57600086600001516040516105109190611dd2565b908152602001604051809103902060040160008381526020019081526020016000206005016000828152602001908152602001600020600001805461055490611e18565b80601f016020809104026020016040519081016040528092919081815260200182805461058090611e18565b80156105cd5780601f106105a2576101008083540402835291602001916105cd565b820191906000526020600020905b8154815290600101906020018083116105b057829003601f168201915b5050505050846060015183815181106105e9576105e8611e49565b5b602002602001015160400151828151811061060757610606611e49565b5b602002602001015160000181905250600080876000015160405161062b9190611dd2565b9081526020016040518091039020600401600084815260200190815260200160002060050160008381526020019081526020016000206001015490508067ffffffffffffffff81111561068157610680611271565b5b6040519080825280602002602001820160405280156106ba57816020015b6106a761122d565b81526020019060019003908161069f5790505b50856060015184815181106106d2576106d1611e49565b5b60200260200101516040015183815181106106f0576106ef611e49565b5b60200260200101516020018190525060005b818110156109b5576000886000015160405161071e9190611dd2565b9081526020016040518091039020600401600085815260200190815260200160002060050160008481526020019081526020016000206002016000828152602001908152602001600020600001805461077690611e18565b80601f01602080910402602001604051908101604052809291908181526020018280546107a290611e18565b80156107ef5780601f106107c4576101008083540402835291602001916107ef565b820191906000526020600020905b8154815290600101906020018083116107d257829003601f168201915b50505050508660600151858151811061080b5761080a611e49565b5b602002602001015160400151848151811061082957610828611e49565b5b602002602001015160200151828151811061084757610846611e49565b5b6020026020010151600001819052506000886000015160405161086a9190611dd2565b908152602001604051809103902060040160008581526020019081526020016000206005016000848152602001908152602001600020600201600082815260200190815260200160002060010180546108c290611e18565b80601f01602080910402602001604051908101604052809291908181526020018280546108ee90611e18565b801561093b5780601f106109105761010080835404028352916020019161093b565b820191906000526020600020905b81548152906001019060200180831161091e57829003601f168201915b50505050508660600151858151811061095757610956611e49565b5b602002602001015160400151848151811061097557610974611e49565b5b602002602001015160200151828151811061099357610992611e49565b5b60200260200101516020018190525080806109ad90611eb1565b915050610702565b505080806109c290611eb1565b9150506104bb565b5080806109d690611eb1565b9150506102ed565b5081925050505b919050565b60005b60008260200151604051610a019190611dd2565b908152602001604051809103902060030154811015610b745760005b60008360200151604051610a319190611dd2565b9081526020016040518091039020600401600083815260200190815260200160002060040154811015610b6057610b4160008460200151604051610a759190611dd2565b9081526020016040518091039020600401600084815260200190815260200160002060050160008381526020019081526020016000206000018054610ab990611e18565b80601f0160208091040260200160405190810160405280929190818152602001828054610ae590611e18565b8015610b325780601f10610b0757610100808354040283529160200191610b32565b820191906000526020600020905b815481529060010190602001808311610b1557829003601f168201915b5050505050846000015161119f565b15610b4d575050610eed565b8080610b5890611eb1565b915050610a1d565b508080610b6c90611eb1565b9150506109ed565b5060005b60008260200151604051610b8c9190611dd2565b908152602001604051809103902060030154811015610eeb57610c7460008360200151604051610bbc9190611dd2565b908152602001604051809103902060040160008381526020019081526020016000206000018054610bec90611e18565b80601f0160208091040260200160405190810160405280929190818152602001828054610c1890611e18565b8015610c655780601f10610c3a57610100808354040283529160200191610c65565b820191906000526020600020905b815481529060010190602001808311610c4857829003601f168201915b5050505050836040015161119f565b15610ed8576000808360200151604051610c8e9190611dd2565b908152602001604051809103902060040160008381526020019081526020016000206004016000815480929190610cc490611eb1565b919050559050826000015160008460200151604051610ce39190611dd2565b9081526020016040518091039020600401600084815260200190815260200160002060050160008381526020019081526020016000206000019081610d2891906120a5565b5060005b836060015151811015610ed15783606001518181518110610d5057610d4f611e49565b5b60200260200101516000015160008560200151604051610d709190611dd2565b90815260200160405180910390206004016000858152602001908152602001600020600501600084815260200190815260200160002060020160008381526020019081526020016000206000019081610dc991906120a5565b5083606001518181518110610de157610de0611e49565b5b60200260200101516020015160008560200151604051610e019190611dd2565b90815260200160405180910390206004016000858152602001908152602001600020600501600084815260200190815260200160002060020160008381526020019081526020016000206001019081610e5a91906120a5565b5060008460200151604051610e6f9190611dd2565b9081526020016040518091039020600401600084815260200190815260200160002060050160008381526020019081526020016000206001016000815480929190610eb990611eb1565b91905055508080610ec990611eb1565b915050610d2c565b5050610eeb565b8080610ee390611eb1565b915050610b78565b505b50565b806000015160008260000151604051610f099190611dd2565b90815260200160405180910390206000019081610f2691906120a5565b50806020015160008260000151604051610f409190611dd2565b90815260200160405180910390206001019081610f5d91906120a5565b506000808260000151604051610f739190611dd2565b908152602001604051809103902060030181905550606460008260000151604051610f9e9190611dd2565b90815260200160405180910390206002018190555050565b6000808260000151604051610fcb9190611dd2565b90815260200160405180910390206003016000815480929190610fed90611eb1565b91905055905081602001516000836000015160405161100c9190611dd2565b90815260200160405180910390206004016000838152602001908152602001600020600001908161103d91906120a5565b508160400151600083600001516040516110579190611dd2565b90815260200160405180910390206004016000838152602001908152602001600020600101819055508160600151516000836000015160405161109a9190611dd2565b908152602001604051809103902060040160008381526020019081526020016000206002018190555060008083600001516040516110d89190611dd2565b908152602001604051809103902060040160008381526020019081526020016000206004018190555060005b82606001515181101561119a578260600151818151811061112857611127611e49565b5b6020026020010151600084600001516040516111449190611dd2565b908152602001604051809103902060040160008481526020019081526020016000206003016000838152602001908152602001600020908161118691906120a5565b50808061119290611eb1565b915050611104565b505050565b600081805190602001208380519060200120036111bf57600190506111c4565b600090505b92915050565b6040518060800160405280606081526020016000815260200160608152602001606081525090565b60405180606001604052806060815260200160008152602001606081525090565b604051806040016040528060608152602001606081525090565b604051806040016040528060608152602001606081525090565b6000604051905090565b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6112a982611260565b810181811067ffffffffffffffff821117156112c8576112c7611271565b5b80604052505050565b60006112db611247565b90506112e782826112a0565b919050565b600080fd5b600080fd5b600080fd5b600067ffffffffffffffff82111561131657611315611271565b5b61131f82611260565b9050602081019050919050565b82818337600083830152505050565b600061134e611349846112fb565b6112d1565b90508281526020810184848401111561136a576113696112f6565b5b61137584828561132c565b509392505050565b600082601f830112611392576113916112f1565b5b81356113a284826020860161133b565b91505092915050565b6000604082840312156113c1576113c061125b565b5b6113cb60406112d1565b9050600082013567ffffffffffffffff8111156113eb576113ea6112ec565b5b6113f78482850161137d565b600083015250602082013567ffffffffffffffff81111561141b5761141a6112ec565b5b6114278482850161137d565b60208301525092915050565b60006020828403121561144957611448611251565b5b600082013567ffffffffffffffff81111561146757611466611256565b5b611473848285016113ab565b91505092915050565b600081519050919050565b600082825260208201905092915050565b60005b838110156114b657808201518184015260208101905061149b565b838111156114c5576000848401525b50505050565b60006114d68261147c565b6114e08185611487565b93506114f0818560208601611498565b6114f981611260565b840191505092915050565b6000819050919050565b61151781611504565b82525050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600060408301600083015184820360008601526115be82826114cb565b915050602083015184820360208601526115d882826114cb565b9150508091505092915050565b60006115f183836115a1565b905092915050565b6000602082019050919050565b600061161182611575565b61161b8185611580565b93508360208202850161162d85611591565b8060005b85811015611669578484038952815161164a85826115e5565b9450611655836115f9565b925060208a01995050600181019050611631565b50829750879550505050505092915050565b6000604083016000830151848203600086015261169882826114cb565b915050602083015184820360208601526116b28282611606565b9150508091505092915050565b60006116cb838361167b565b905092915050565b6000602082019050919050565b60006116eb82611549565b6116f58185611554565b93508360208202850161170785611565565b8060005b85811015611743578484038952815161172485826116bf565b945061172f836116d3565b925060208a0199505060018101905061170b565b50829750879550505050505092915050565b6000606083016000830151848203600086015261177282826114cb565b9150506020830151611787602086018261150e565b506040830151848203604086015261179f82826116e0565b9150508091505092915050565b60006117b88383611755565b905092915050565b6000602082019050919050565b60006117d88261151d565b6117e28185611528565b9350836020820285016117f485611539565b8060005b85811015611830578484038952815161181185826117ac565b945061181c836117c0565b925060208a019950506001810190506117f8565b50829750879550505050505092915050565b6000608083016000830151848203600086015261185f82826114cb565b9150506020830151611874602086018261150e565b506040830151848203604086015261188c82826114cb565b915050606083015184820360608601526118a682826117cd565b9150508091505092915050565b600060208201905081810360008301526118cd8184611842565b905092915050565b600067ffffffffffffffff8211156118f0576118ef611271565b5b602082029050602081019050919050565b600080fd5b60006040828403121561191c5761191b61125b565b5b61192660406112d1565b9050600082013567ffffffffffffffff811115611946576119456112ec565b5b6119528482850161137d565b600083015250602082013567ffffffffffffffff811115611976576119756112ec565b5b6119828482850161137d565b60208301525092915050565b60006119a161199c846118d5565b6112d1565b905080838252602082019050602084028301858111156119c4576119c3611901565b5b835b81811015611a0b57803567ffffffffffffffff8111156119e9576119e86112f1565b5b8086016119f68982611906565b855260208501945050506020810190506119c6565b5050509392505050565b600082601f830112611a2a57611a296112f1565b5b8135611a3a84826020860161198e565b91505092915050565b600060808284031215611a5957611a5861125b565b5b611a6360806112d1565b9050600082013567ffffffffffffffff811115611a8357611a826112ec565b5b611a8f8482850161137d565b600083015250602082013567ffffffffffffffff811115611ab357611ab26112ec565b5b611abf8482850161137d565b602083015250604082013567ffffffffffffffff811115611ae357611ae26112ec565b5b611aef8482850161137d565b604083015250606082013567ffffffffffffffff811115611b1357611b126112ec565b5b611b1f84828501611a15565b60608301525092915050565b600060208284031215611b4157611b40611251565b5b600082013567ffffffffffffffff811115611b5f57611b5e611256565b5b611b6b84828501611a43565b91505092915050565b611b7d81611504565b8114611b8857600080fd5b50565b600081359050611b9a81611b74565b92915050565b600067ffffffffffffffff821115611bbb57611bba611271565b5b602082029050602081019050919050565b6000611bdf611bda84611ba0565b6112d1565b90508083825260208201905060208402830185811115611c0257611c01611901565b5b835b81811015611c4957803567ffffffffffffffff811115611c2757611c266112f1565b5b808601611c34898261137d565b85526020850194505050602081019050611c04565b5050509392505050565b600082601f830112611c6857611c676112f1565b5b8135611c78848260208601611bcc565b91505092915050565b600060808284031215611c9757611c9661125b565b5b611ca160806112d1565b9050600082013567ffffffffffffffff811115611cc157611cc06112ec565b5b611ccd8482850161137d565b600083015250602082013567ffffffffffffffff811115611cf157611cf06112ec565b5b611cfd8482850161137d565b6020830152506040611d1184828501611b8b565b604083015250606082013567ffffffffffffffff811115611d3557611d346112ec565b5b611d4184828501611c53565b60608301525092915050565b600060208284031215611d6357611d62611251565b5b600082013567ffffffffffffffff811115611d8157611d80611256565b5b611d8d84828501611c81565b91505092915050565b600081905092915050565b6000611dac8261147c565b611db68185611d96565b9350611dc6818560208601611498565b80840191505092915050565b6000611dde8284611da1565b915081905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680611e3057607f821691505b602082108103611e4357611e42611de9565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000819050919050565b6000611ebc82611ea7565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203611eee57611eed611e78565b5b600182019050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302611f5b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82611f1e565b611f658683611f1e565b95508019841693508086168417925050509392505050565b6000819050919050565b6000611fa2611f9d611f9884611ea7565b611f7d565b611ea7565b9050919050565b6000819050919050565b611fbc83611f87565b611fd0611fc882611fa9565b848454611f2b565b825550505050565b600090565b611fe5611fd8565b611ff0818484611fb3565b505050565b5b8181101561201457612009600082611fdd565b600181019050611ff6565b5050565b601f8211156120595761202a81611ef9565b61203384611f0e565b81016020851015612042578190505b61205661204e85611f0e565b830182611ff5565b50505b505050565b600082821c905092915050565b600061207c6000198460080261205e565b1980831691505092915050565b6000612095838361206b565b9150826002028217905092915050565b6120ae8261147c565b67ffffffffffffffff8111156120c7576120c6611271565b5b6120d18254611e18565b6120dc828285612018565b600060209050601f83116001811461210f57600084156120fd578287015190505b6121078582612089565b86555061216f565b601f19841661211d86611ef9565b60005b8281101561214557848901518255600182019150602085019450602081019050612120565b86831015612162578489015161215e601f89168261206b565b8355505b6001600288020188555050505b50505050505056fea2646970667358221220bec75bf77e0b57c441d53f77f4e8c9e404e9213555257bd076e525c3c078587364736f6c634300080f0033";
        public MarketPlaceDeploymentBase() : base(BYTECODE) { }
        public MarketPlaceDeploymentBase(string byteCode) : base(byteCode) { }

    }

    public partial class AddDataPackFunction : AddDataPackFunctionBase { }

    [Function("addDataPack")]
    public class AddDataPackFunctionBase : FunctionMessage
    {
        [Parameter("tuple", "request", 1)]
        public virtual AddDataPackRequest Request { get; set; }
    }

    public partial class BuyDataFunction : BuyDataFunctionBase { }

    [Function("buyData")]
    public class BuyDataFunctionBase : FunctionMessage
    {
        [Parameter("tuple", "request", 1)]
        public virtual BuyDataRequest Request { get; set; }
    }

    public partial class CreateOrganizationFunction : CreateOrganizationFunctionBase { }

    [Function("createOrganization")]
    public class CreateOrganizationFunctionBase : FunctionMessage
    {
        [Parameter("tuple", "request", 1)]
        public virtual CreateOrgRequest Request { get; set; }
    }

    public partial class GetOrganizationFunction : GetOrganizationFunctionBase { }

    [Function("getOrganization", typeof(GetOrganizationOutputDTO))]
    public class GetOrganizationFunctionBase : FunctionMessage
    {
        [Parameter("tuple", "request", 1)]
        public virtual CreateOrgRequest Request { get; set; }
    }







    public partial class GetOrganizationOutputDTO : GetOrganizationOutputDTOBase { }

    [FunctionOutput]
    public class GetOrganizationOutputDTOBase : IFunctionOutputDTO
    {
        [Parameter("tuple", "", 1)]
        public virtual OrganizationResponse ReturnValue1 { get; set; }
    }

    public partial class AddDataPackRequest : AddDataPackRequestBase { }

    public class AddDataPackRequestBase
    {
        [Parameter("string", "organization", 1)]
        public virtual string Organization { get; set; }
        [Parameter("string", "id", 2)]
        public virtual string Id { get; set; }
        [Parameter("int256", "pricePerUnit", 3)]
        public virtual BigInteger PricePerUnit { get; set; }
        [Parameter("string[]", "requestedAttributes", 4)]
        public virtual List<string> RequestedAttributes { get; set; }
    }

    public partial class BuyDataRequest : BuyDataRequestBase { }

    public class BuyDataRequestBase
    {
        [Parameter("string", "userID", 1)]
        public virtual string UserID { get; set; }
        [Parameter("string", "organization", 2)]
        public virtual string Organization { get; set; }
        [Parameter("string", "dataPackID", 3)]
        public virtual string DataPackID { get; set; }
        [Parameter("tuple[]", "attributes", 4)]
        public virtual List<Attribute> Attributes { get; set; }
    }

    public partial class CreateOrgRequest : CreateOrgRequestBase { }

    public class CreateOrgRequestBase
    {
        [Parameter("string", "id", 1)]
        public virtual string Id { get; set; }
        [Parameter("string", "password", 2)]
        public virtual string Password { get; set; }
    }

    public partial class DataPackReceivedRequest : DataPackReceivedRequestBase { }

    public class DataPackReceivedRequestBase
    {
        [Parameter("string", "userID", 1)]
        public virtual string UserID { get; set; }
        [Parameter("tuple[]", "attributes", 2)]
        public virtual List<Attribute> Attributes { get; set; }
    }

    public partial class DataPackResponse : DataPackResponseBase { }

    public class DataPackResponseBase
    {
        [Parameter("string", "id", 1)]
        public virtual string Id { get; set; }
        [Parameter("int256", "pricePerUnit", 2)]
        public virtual BigInteger PricePerUnit { get; set; }
        [Parameter("tuple[]", "received", 3)]
        public virtual List<DataPackReceivedRequest> Received { get; set; }
    }

    public partial class OrganizationResponse : OrganizationResponseBase { }

    public class OrganizationResponseBase
    {
        [Parameter("string", "id", 1)]
        public virtual string Id { get; set; }
        [Parameter("int256", "balance", 2)]
        public virtual BigInteger Balance { get; set; }
        [Parameter("string", "status", 3)]
        public virtual string Status { get; set; }
        [Parameter("tuple[]", "packs", 4)]
        public virtual List<DataPackResponse> Packs { get; set; }
    }
}

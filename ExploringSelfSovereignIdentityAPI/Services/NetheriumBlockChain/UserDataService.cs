using System;
using System.Threading.Tasks;
using System.Collections.Generic;
using System.Numerics;
using Nethereum.Hex.HexTypes;
using Nethereum.ABI.FunctionEncoding.Attributes;
using Nethereum.Web3;
using Nethereum.RPC.Eth.DTOs;
using Nethereum.Contracts.CQS;
using Nethereum.Contracts;
using System.Threading;
using Nethereum.Contracts.ContractHandlers;
using ExploringSelfSovereignIdentityAPI.Models;
using ExploringSelfSovereignIdentityAPI.Services.Encryption;
using Nethereum.Web3.Accounts;

namespace ExploringSelfSovereignIdentityAPI.Services.NetheriumBlockChain
{
    public class UserDataService : IUserDataService
    {
        /*static string url = "http://127.0.0.1:8545";
        static string privateKey = "734674bd34f2476f15c6d5f6c8c1c7c92e465921e546771d088b958607531d10";
        private readonly string senderAddress = "0x8A1f48B91fbDC94b82E1997c2630466c5FaCf38b";
        private static string contractAddress = "0xA52dD18FF4b5C5E84502C09f31068BAB7aD01C00";

        static Web3 web3 = new Web3(new Nethereum.Web3.Accounts.Account(privateKey), url);

        private ContractHandler contractHandler = web3.Eth.GetContractHandler(contractAddress);

        public UserDataService()
        {
            web3.TransactionManager.UseLegacyAsDefault = true;
        }*/

        private static string url = "http://testchain.nethereum.com:8545";
        private static string privateKey = "0x7580e7fb49df1c861f0050fae31c2224c6aba908e116b8da44ee8cd927b990b0";
        private static Account acc = new Nethereum.Web3.Accounts.Account(privateKey, 444444444500);
        private static Web3 web3 = new Web3(acc, url);

        private static ContractHandler contractHandler;

        private readonly IEncryptionService encryptservice;

        public UserDataService()
        {
            web3.TransactionManager.UseLegacyAsDefault = true;
            encryptservice = new EncryptionService();

            Console.WriteLine(acc.Address);
        }

        private async Task<ContractHandler> deploy()
        {
            var userDataContractDeployment = new UserDataContractDeployment();

            var transactionReceiptDeployment = await web3.Eth.GetContractDeploymentHandler<UserDataContractDeployment>().SendRequestAndWaitForReceiptAsync(userDataContractDeployment);
            var contractAddress = transactionReceiptDeployment.ContractAddress;

            return web3.Eth.GetContractHandler(contractAddress);
        }



        public async Task<string> createUser(string id)
        {
            if (contractHandler == null) contractHandler = await deploy();

            var createUserFunction = new CreateUserFunction();
            createUserFunction.Id = id;
            var createUserFunctionTxnReceipt = await contractHandler.SendRequestAndWaitForReceiptAsync(createUserFunction);
            return "success";
        }

        public async Task<String> newTransactionRequest(TransactionRequest request)
        {
            if (contractHandler == null) contractHandler = await deploy();

            TransactionRequest tr = new TransactionRequest();

            TransactionStamp stamp = new TransactionStamp();
            stamp.ToID = request.Stamp.ToID;
            stamp.FromID = request.Stamp.FromID;
            stamp.Message = request.Stamp.Message;
            stamp.Date = DateTime.Now.ToString();
            stamp.Status = "pending";

            List<string> attrs = new List<string>();

            for (int i=0; i<request.Attributes.Count; i++) 
            {
                attrs.Add(request.Attributes[i]);
            }

            tr.Attributes = attrs;
            tr.Stamp = stamp;

            var newTransactionRequestFunction = new NewTransactionRequestFunction();
            newTransactionRequestFunction.Request = tr;
            var newTransactionTxnReceipt = await contractHandler.SendRequestAndWaitForReceiptAsync(newTransactionRequestFunction);

            return "success";
        }

        public async Task<string> approveTransaction(string id, int index)
        {
            if (contractHandler == null) contractHandler = await deploy();

            /* Stage A */
            var approveTransactionStageAFunction = new ApproveTransactionStageAFunction();
            approveTransactionStageAFunction.Id = id;
            approveTransactionStageAFunction.Index = index;
            var approveAFunctionTxnReceipt = await contractHandler.SendRequestAndWaitForReceiptAsync(approveTransactionStageAFunction);

            /* Stage B */
            var approveBFunction = new ApproveTransactionStageBFunction();
            approveBFunction.Id = id;
            approveBFunction.Index = index;
            var approveBFunctionTxnReceipDTO = await contractHandler.QueryDeserializingToObjectAsync<ApproveTransactionStageBFunction, ApproveTransactionStageBOutputDTO>(approveBFunction);

            approveBFunctionTxnReceipDTO.ReturnValue1.Attributes.ForEach(attribute => attribute.Value = encryptservice.DecryptString(approveBFunctionTxnReceipDTO.ReturnValue1.Stamp.ToID, attribute.Value));
            //approveBFunctionTxnReceipDTO.ReturnValue1.Attributes.ForEach(attribute => attribute.Value = encryptservice.EncryptString(approveBFunctionTxnReceipDTO.ReturnValue1.Stamp.FromID, attribute.Value));

            /* Stage C */
            var approveTransactionStageCFunction = new ApproveTransactionStageCFunction();
            approveTransactionStageCFunction.Id = approveBFunctionTxnReceipDTO.ReturnValue1.Stamp.FromID;

            approveTransactionStageCFunction.Transaction = approveBFunctionTxnReceipDTO.ReturnValue1;
            var approveTransactionStageCFunctionTxnReceipt = await contractHandler.SendRequestAndWaitForReceiptAsync(approveTransactionStageCFunction);

            return "success";
        }

        public async Task<string> declineTransaction(string id, int index)
        {
            var declineTransactionFunction = new DeclineTransactionFunction();
            declineTransactionFunction.Id = id;
            declineTransactionFunction.Index = index;
            var declineTransactionFunctionTxnReceipt = await contractHandler.SendRequestAndWaitForReceiptAsync(declineTransactionFunction);

            return "success";
        }

        /*public async Task<string> approveTransactionStageC(string id, TransactionResponse transaction)
        {
            
            TransactionResponse tr = new TransactionResponse();

            tr.Attributes = transaction.Attributes;
            tr.Stamp = transaction.Stamp;

            var approveTransactionStageCFunction = new ApproveTransactionStageCFunction();
            approveTransactionStageCFunction.Id = id;
            approveTransactionStageCFunction.Transaction = tr;
            var approveTransactionStageCFunctionTxnReceipt = await contractHandler.SendRequestAndWaitForReceiptAsync(approveTransactionStageCFunction);

            return "success";
        }*/




        public async Task<string> updateAttributes(string id, AttributeBC[] attributes)
        {
            return "success";
        }

        public async Task<GetAttributesTransactionOutputDTO> getAttributesForTransaction(String id, List<Attribute> attributes)
        {
            if (contractHandler == null) contractHandler = await deploy();

            var getAttributesTransaction = new GetAttributesTransactionFunction();
            getAttributesTransaction.Id = id;
            getAttributesTransaction.Attributes = attributes;
            var getTransactionATtributesOutputDTO = await contractHandler.QueryDeserializingToObjectAsync<GetAttributesTransactionFunction, GetAttributesTransactionOutputDTO>(getAttributesTransaction);

            return getTransactionATtributesOutputDTO;
        }

        public async Task<GetUserDataOutputDTO> updateUserData(UpdateGen2 update)
        {

            

            if (contractHandler == null) contractHandler = await deploy();

            Update u = new Update();
            u.Id = update.Id;

            List<AttributeUpdate> au = new List<AttributeUpdate>();

            for(int i=0;i < update.Attributes.Count;i++)
            {
                Console.WriteLine(update.Attributes[i].Attribute.Name);
                Console.WriteLine(update.Attributes[i].Attribute.Value);
                AttributeUpdate item = new AttributeUpdate();
                item.Attribute = new Attribute();
                item.Attribute.Name = update.Attributes[i].Attribute.Name;
                //item.Attribute.Value = update.Attributes[i].Attribute.Value;
                item.Attribute.Value = encryptservice.EncryptString(u.Id, update.Attributes[i].Attribute.Value);

                item.Index = new BigInteger(update.Attributes[i].Index);

                au.Add(item);
                
            }


            List<CredentialUpdate> cu = new List<CredentialUpdate>();
            for (int i = 0; i < update.Credentials.Count; i++)
            {
                
                CredentialUpdate item2 = new CredentialUpdate();

                List<Attribute> ca = new List<Attribute>();
                for (int j = 0; j < update.Credentials[i].Attributes.Count; j++)
                {
                    Attribute item3 = new Attribute();
                    item3.Name = update.Credentials[i].Attributes[j].Name; 
                    item3.Value = encryptservice.EncryptString(u.Id, update.Credentials[i].Attributes[j].Value);

                    ca.Add(item3);
                }
                item2.Attributes = ca;

                item2.Organization = update.Credentials[i].Organization;

                item2.Index = new BigInteger(update.Credentials[i].Index);

                cu.Add(item2);

            }

            u.Attributes = au;
            u.Credentials = cu;

            var updateUserFunction = new UpdateUserFunction();
            updateUserFunction.Update = u;
            var updateUserFunctionTxnReceipt = await contractHandler.SendRequestAndWaitForReceiptAsync(updateUserFunction);
            return await getUserData(update.Id);
        }

        public async Task<GetUserDataOutputDTO> getUserData(string id)
        {

            Console.WriteLine("ID called: " + id);

            if (contractHandler == null) contractHandler = await deploy();

            var getUserDataFunction = new GetUserDataFunction(); 
            getUserDataFunction.Id = id;
            GetUserDataOutputDTO getUserDataOutputDTO = await contractHandler.QueryDeserializingToObjectAsync<GetUserDataFunction, GetUserDataOutputDTO>(getUserDataFunction);

            if (getUserDataOutputDTO == null)
            {
                return getUserDataOutputDTO;
            }

            getUserDataOutputDTO.ReturnValue1.Attributes.ForEach(attribute => attribute.Value = encryptservice.DecryptString(id, attribute.Value));

            getUserDataOutputDTO.ReturnValue1.Credentials.ForEach(credential => credential.Attributes.ForEach(attribute => attribute.Value = encryptservice.DecryptString(id,attribute.Value)));

            if (getUserDataOutputDTO.ReturnValue1.Id == "")
                getUserDataOutputDTO.ReturnValue1.Id = "undefined";

            return getUserDataOutputDTO;
        }
    }



    public partial class UserDataContractDeployment : UserDataContractDeploymentBase
    {
        public UserDataContractDeployment() : base(BYTECODE) { }
        public UserDataContractDeployment(string byteCode) : base(byteCode) { }
    }

    public class UserDataContractDeploymentBase : ContractDeploymentMessage
    {
        public static string BYTECODE = "0x608060405234801561001057600080fd5b506159e880620000216000396000f3fe608060405234801561001057600080fd5b50600436106100b45760003560e01c8063870187eb11610071578063870187eb14610189578063af1a404f146101a5578063b9572975146101c1578063d4b94b0e146101f1578063d78ab46f1461020d578063fa1868ff1461023d576100b4565b806301760669146100b957806332d1b291146100d557806333d46c87146100f1578063438e644e14610121578063507ffba51461013d57806354ab240314610159575b600080fd5b6100d360048036038101906100ce9190614769565b61026d565b005b6100ef60048036038101906100ea91906147e8565b6102c3565b005b61010b60048036038101906101069190614844565b610353565b6040516101189190614a8e565b60405180910390f35b61013b60048036038101906101369190614d31565b610730565b005b61015760048036038101906101529190614d7a565b61074d565b005b610173600480360381019061016e9190614d7a565b61084e565b60405161018091906152dd565b60405180910390f35b6101a3600480360381019061019e91906147e8565b611fc9565b005b6101bf60048036038101906101ba9190615387565b612016565b005b6101db60048036038101906101d69190614844565b612341565b6040516101e89190614a8e565b60405180910390f35b61020b600480360381019061020691906147e8565b61282f565b005b610227600480360381019061022291906147e8565b6128bf565b6040516102349190615443565b60405180910390f35b61025760048036038101906102529190615465565b612f93565b6040516102649190615563565b60405180910390f35b610275613319565b61027e57600080fd5b6000816020015151111561029f5761029e81600001518260200151613379565b5b600081604001515111156102c0576102bf816000015182604001516135fd565b5b50565b6102cb613319565b6102d457600080fd5b6040518060400160405280600881526020017f6465636c696e656400000000000000000000000000000000000000000000000081525060008360405161031a91906155c1565b90815260200160405180910390206007016000838152602001908152602001600020600201600401908161034e91906157e4565b505050565b61035b614006565b610363614006565b60005b60008560405161037691906155c1565b908152602001604051809103902060040154811015610724576104566000866040516103a291906155c1565b9081526020016040518091039020600501600083815260200190815260200160002060000180546103d290615607565b80601f01602080910402602001604051908101604052809291908181526020018280546103fe90615607565b801561044b5780601f106104205761010080835404028352916020019161044b565b820191906000526020600020905b81548152906001019060200180831161042e57829003601f168201915b50505050508561390b565b15610711578382600001819052506000808660405161047591906155c1565b9081526020016040518091039020600501600083815260200190815260200160002060010154905060008167ffffffffffffffff8111156104b9576104b8614109565b5b6040519080825280602002602001820160405280156104f257816020015b6104df614020565b8152602001906001900390816104d75790505b50905060005b828110156106fb5760008860405161051091906155c1565b908152602001604051809103902060050160008581526020019081526020016000206002016000828152602001908152602001600020600001805461055490615607565b80601f016020809104026020016040519081016040528092919081815260200182805461058090615607565b80156105cd5780601f106105a2576101008083540402835291602001916105cd565b820191906000526020600020905b8154815290600101906020018083116105b057829003601f168201915b50505050508282815181106105e5576105e46158b6565b5b60200260200101516000018190525060008860405161060491906155c1565b908152602001604051809103902060050160008581526020019081526020016000206002016000828152602001908152602001600020600101805461064890615607565b80601f016020809104026020016040519081016040528092919081815260200182805461067490615607565b80156106c15780601f10610696576101008083540402835291602001916106c1565b820191906000526020600020905b8154815290600101906020018083116106a457829003601f168201915b50505050508282815181106106d9576106d86158b6565b5b60200260200101516020018190525080806106f390615914565b9150506104f8565b508084602001819052508394505050505061072a565b808061071c90615914565b915050610366565b50809150505b92915050565b610738613319565b61074157600080fd5b61074a81613936565b50565b610755613319565b61075e57600080fd5b8060008260405161076f91906155c1565b9081526020016040518091039020600001908161078c91906157e4565b506000808260405161079e91906155c1565b908152602001604051809103902060020181905550600080826040516107c491906155c1565b908152602001604051809103902060040181905550600080826040516107ea91906155c1565b9081526020016040518091039020600601819055506000808260405161081091906155c1565b9081526020016040518091039020600801819055506000808260405161083691906155c1565b9081526020016040518091039020600a018190555050565b61085661403a565b61085e613319565b61086757600080fd5b6000808360405161087891906155c1565b908152602001604051809103902060020154905060008167ffffffffffffffff8111156108a8576108a7614109565b5b6040519080825280602002602001820160405280156108e157816020015b6108ce614020565b8152602001906001900390816108c65790505b50905060005b6000856040516108f791906155c1565b908152602001604051809103902060020154811015610ae35760008560405161092091906155c1565b90815260200160405180910390206003016000828152602001908152602001600020600001805461095090615607565b80601f016020809104026020016040519081016040528092919081815260200182805461097c90615607565b80156109c95780601f1061099e576101008083540402835291602001916109c9565b820191906000526020600020905b8154815290600101906020018083116109ac57829003601f168201915b50505050508282815181106109e1576109e06158b6565b5b602002602001015160000181905250600085604051610a0091906155c1565b908152602001604051809103902060030160008281526020019081526020016000206001018054610a3090615607565b80601f0160208091040260200160405190810160405280929190818152602001828054610a5c90615607565b8015610aa95780601f10610a7e57610100808354040283529160200191610aa9565b820191906000526020600020905b815481529060010190602001808311610a8c57829003601f168201915b5050505050828281518110610ac157610ac06158b6565b5b6020026020010151602001819052508080610adb90615914565b9150506108e7565b50600084604051610af491906155c1565b908152602001604051809103902060040154915060008267ffffffffffffffff811115610b2457610b23614109565b5b604051908082528060200260200182016040528015610b5d57816020015b610b4a614006565b815260200190600190039081610b425790505b50905060005b600086604051610b7391906155c1565b908152602001604051809103902060040154811015610fa257600086604051610b9c91906155c1565b908152602001604051809103902060050160008281526020019081526020016000206000018054610bcc90615607565b80601f0160208091040260200160405190810160405280929190818152602001828054610bf890615607565b8015610c455780601f10610c1a57610100808354040283529160200191610c45565b820191906000526020600020905b815481529060010190602001808311610c2857829003601f168201915b5050505050828281518110610c5d57610c5c6158b6565b5b602002602001015160000181905250600086604051610c7c91906155c1565b908152602001604051809103902060050160008281526020019081526020016000206001015467ffffffffffffffff811115610cbb57610cba614109565b5b604051908082528060200260200182016040528015610cf457816020015b610ce1614020565b815260200190600190039081610cd95790505b50828281518110610d0857610d076158b6565b5b60200260200101516020018190525060005b600087604051610d2a91906155c1565b9081526020016040518091039020600501600083815260200190815260200160002060010154811015610f8e57600087604051610d6791906155c1565b9081526020016040518091039020600501600083815260200190815260200160002060020160008281526020019081526020016000206000018054610dab90615607565b80601f0160208091040260200160405190810160405280929190818152602001828054610dd790615607565b8015610e245780601f10610df957610100808354040283529160200191610e24565b820191906000526020600020905b815481529060010190602001808311610e0757829003601f168201915b5050505050838381518110610e3c57610e3b6158b6565b5b6020026020010151602001518281518110610e5a57610e596158b6565b5b602002602001015160000181905250600087604051610e7991906155c1565b9081526020016040518091039020600501600083815260200190815260200160002060020160008281526020019081526020016000206001018054610ebd90615607565b80601f0160208091040260200160405190810160405280929190818152602001828054610ee990615607565b8015610f365780601f10610f0b57610100808354040283529160200191610f36565b820191906000526020600020905b815481529060010190602001808311610f1957829003601f168201915b5050505050838381518110610f4e57610f4d6158b6565b5b6020026020010151602001518281518110610f6c57610f6b6158b6565b5b6020026020010151602001819052508080610f8690615914565b915050610d1a565b508080610f9a90615914565b915050610b63565b50600085604051610fb391906155c1565b908152602001604051809103902060060154925060008086604051610fd891906155c1565b90815260200160405180910390206006015467ffffffffffffffff81111561100357611002614109565b5b60405190808252806020026020018201604052801561103c57816020015b611029614070565b8152602001906001900390816110215790505b50905060005b848110156116b45760008760405161105a91906155c1565b90815260200160405180910390206007016000828152602001908152602001600020600201600101805461108d90615607565b80601f01602080910402602001604051908101604052809291908181526020018280546110b990615607565b80156111065780601f106110db57610100808354040283529160200191611106565b820191906000526020600020905b8154815290600101906020018083116110e957829003601f168201915b505050505082828151811061111e5761111d6158b6565b5b6020026020010151602001516020018190525060008760405161114191906155c1565b90815260200160405180910390206007016000828152602001908152602001600020600201600001805461117490615607565b80601f01602080910402602001604051908101604052809291908181526020018280546111a090615607565b80156111ed5780601f106111c2576101008083540402835291602001916111ed565b820191906000526020600020905b8154815290600101906020018083116111d057829003601f168201915b5050505050828281518110611205576112046158b6565b5b6020026020010151602001516000018190525060008760405161122891906155c1565b90815260200160405180910390206007016000828152602001908152602001600020600201600301805461125b90615607565b80601f016020809104026020016040519081016040528092919081815260200182805461128790615607565b80156112d45780601f106112a9576101008083540402835291602001916112d4565b820191906000526020600020905b8154815290600101906020018083116112b757829003601f168201915b50505050508282815181106112ec576112eb6158b6565b5b6020026020010151602001516060018190525060008760405161130f91906155c1565b90815260200160405180910390206007016000828152602001908152602001600020600201600201805461134290615607565b80601f016020809104026020016040519081016040528092919081815260200182805461136e90615607565b80156113bb5780601f10611390576101008083540402835291602001916113bb565b820191906000526020600020905b81548152906001019060200180831161139e57829003601f168201915b50505050508282815181106113d3576113d26158b6565b5b602002602001015160200151604001819052506000876040516113f691906155c1565b90815260200160405180910390206007016000828152602001908152602001600020600201600401805461142990615607565b80601f016020809104026020016040519081016040528092919081815260200182805461145590615607565b80156114a25780601f10611477576101008083540402835291602001916114a2565b820191906000526020600020905b81548152906001019060200180831161148557829003601f168201915b50505050508282815181106114ba576114b96158b6565b5b60200260200101516020015160800181905250600080886040516114de91906155c1565b908152602001604051809103902060070160008381526020019081526020016000206000015490508067ffffffffffffffff8111156115205761151f614109565b5b60405190808252806020026020018201604052801561155357816020015b606081526020019060019003908161153e5790505b50838381518110611567576115666158b6565b5b60200260200101516000018190525060005b8181101561169f5760008960405161159191906155c1565b90815260200160405180910390206007016000848152602001908152602001600020600101600082815260200190815260200160002080546115d290615607565b80601f01602080910402602001604051908101604052809291908181526020018280546115fe90615607565b801561164b5780601f106116205761010080835404028352916020019161164b565b820191906000526020600020905b81548152906001019060200180831161162e57829003601f168201915b5050505050848481518110611663576116626158b6565b5b6020026020010151600001518281518110611681576116806158b6565b5b6020026020010181905250808061169790615914565b915050611579565b505080806116ac90615914565b915050611042565b506000866040516116c591906155c1565b908152602001604051809103902060080154935060008467ffffffffffffffff8111156116f5576116f4614109565b5b60405190808252806020026020018201604052801561172e57816020015b61171b614090565b8152602001906001900390816117135790505b50905060005b85811015611ec55760008860405161174c91906155c1565b90815260200160405180910390206009016000828152602001908152602001600020600201600101805461177f90615607565b80601f01602080910402602001604051908101604052809291908181526020018280546117ab90615607565b80156117f85780601f106117cd576101008083540402835291602001916117f8565b820191906000526020600020905b8154815290600101906020018083116117db57829003601f168201915b50505050508282815181106118105761180f6158b6565b5b6020026020010151602001516020018190525060008860405161183391906155c1565b90815260200160405180910390206009016000828152602001908152602001600020600201600001805461186690615607565b80601f016020809104026020016040519081016040528092919081815260200182805461189290615607565b80156118df5780601f106118b4576101008083540402835291602001916118df565b820191906000526020600020905b8154815290600101906020018083116118c257829003601f168201915b50505050508282815181106118f7576118f66158b6565b5b6020026020010151602001516000018190525060008860405161191a91906155c1565b90815260200160405180910390206009016000828152602001908152602001600020600201600301805461194d90615607565b80601f016020809104026020016040519081016040528092919081815260200182805461197990615607565b80156119c65780601f1061199b576101008083540402835291602001916119c6565b820191906000526020600020905b8154815290600101906020018083116119a957829003601f168201915b50505050508282815181106119de576119dd6158b6565b5b60200260200101516020015160600181905250600088604051611a0191906155c1565b908152602001604051809103902060090160008281526020019081526020016000206002016002018054611a3490615607565b80601f0160208091040260200160405190810160405280929190818152602001828054611a6090615607565b8015611aad5780601f10611a8257610100808354040283529160200191611aad565b820191906000526020600020905b815481529060010190602001808311611a9057829003601f168201915b5050505050828281518110611ac557611ac46158b6565b5b60200260200101516020015160400181905250600088604051611ae891906155c1565b908152602001604051809103902060090160008281526020019081526020016000206002016004018054611b1b90615607565b80601f0160208091040260200160405190810160405280929190818152602001828054611b4790615607565b8015611b945780601f10611b6957610100808354040283529160200191611b94565b820191906000526020600020905b815481529060010190602001808311611b7757829003601f168201915b5050505050828281518110611bac57611bab6158b6565b5b6020026020010151602001516080018190525060008089604051611bd091906155c1565b908152602001604051809103902060090160008381526020019081526020016000206000015490508067ffffffffffffffff811115611c1257611c11614109565b5b604051908082528060200260200182016040528015611c4b57816020015b611c38614020565b815260200190600190039081611c305790505b50838381518110611c5f57611c5e6158b6565b5b60200260200101516000018190525060005b81811015611eb05760008a604051611c8991906155c1565b9081526020016040518091039020600901600084815260200190815260200160002060010160008281526020019081526020016000206000018054611ccd90615607565b80601f0160208091040260200160405190810160405280929190818152602001828054611cf990615607565b8015611d465780601f10611d1b57610100808354040283529160200191611d46565b820191906000526020600020905b815481529060010190602001808311611d2957829003601f168201915b5050505050848481518110611d5e57611d5d6158b6565b5b6020026020010151600001518281518110611d7c57611d7b6158b6565b5b60200260200101516000018190525060008a604051611d9b91906155c1565b9081526020016040518091039020600901600084815260200190815260200160002060010160008281526020019081526020016000206001018054611ddf90615607565b80601f0160208091040260200160405190810160405280929190818152602001828054611e0b90615607565b8015611e585780601f10611e2d57610100808354040283529160200191611e58565b820191906000526020600020905b815481529060010190602001808311611e3b57829003601f168201915b5050505050848481518110611e7057611e6f6158b6565b5b6020026020010151600001518281518110611e8e57611e8d6158b6565b5b6020026020010151602001819052508080611ea890615914565b915050611c71565b50508080611ebd90615914565b915050611734565b506040518060c00160405280600089604051611ee191906155c1565b90815260200160405180910390206000018054611efd90615607565b80601f0160208091040260200160405190810160405280929190818152602001828054611f2990615607565b8015611f765780601f10611f4b57610100808354040283529160200191611f76565b820191906000526020600020905b815481529060010190602001808311611f5957829003601f168201915b50505050508152602001600089604051611f9091906155c1565b90815260200160405180910390206001015481526020018581526020018481526020018381526020018281525095505050505050919050565b611fd1613319565b611fda57600080fd5b80600083604051611feb91906155c1565b9081526020016040518091039020600101600082825461200b919061595c565b925050819055505050565b61201e613319565b61202757600080fd5b6000808360405161203891906155c1565b9081526020016040518091039020600801600081548092919061205a90615914565b9190505590506000826000015151905082602001516000015160008560405161208391906155c1565b9081526020016040518091039020600901600084815260200190815260200160002060020160000190816120b791906157e4565b508260200151602001516000856040516120d191906155c1565b90815260200160405180910390206009016000848152602001908152602001600020600201600101908161210591906157e4565b5082602001516040015160008560405161211f91906155c1565b90815260200160405180910390206009016000848152602001908152602001600020600201600201908161215391906157e4565b5082602001516060015160008560405161216d91906155c1565b9081526020016040518091039020600901600084815260200190815260200160002060020160030190816121a191906157e4565b508260200151608001516000856040516121bb91906155c1565b9081526020016040518091039020600901600084815260200190815260200160002060020160040190816121ef91906157e4565b508060008560405161220191906155c1565b908152602001604051809103902060090160008481526020019081526020016000206000018190555060005b8181101561233a578360000151818151811061224c5761224b6158b6565b5b60200260200101516000015160008660405161226891906155c1565b90815260200160405180910390206009016000858152602001908152602001600020600101600083815260200190815260200160002060000190816122ad91906157e4565b50836000015181815181106122c5576122c46158b6565b5b6020026020010151602001516000866040516122e191906155c1565b908152602001604051809103902060090160008581526020019081526020016000206001016000838152602001908152602001600020600101908161232691906157e4565b50808061233290615914565b91505061222d565b5050505050565b612349614006565b612351613319565b61235a57600080fd5b6000600167ffffffffffffffff81111561237757612376614109565b5b6040519080825280602002602001820160405280156123b057816020015b61239d614006565b8152602001906001900390816123955790505b50905060005b6000856040516123c691906155c1565b908152602001604051809103902060040154811015612809576124a66000866040516123f291906155c1565b90815260200160405180910390206005016000838152602001908152602001600020600001805461242290615607565b80601f016020809104026020016040519081016040528092919081815260200182805461244e90615607565b801561249b5780601f106124705761010080835404028352916020019161249b565b820191906000526020600020905b81548152906001019060200180831161247e57829003601f168201915b50505050508561390b565b156127f65783826000815181106124c0576124bf6158b6565b5b6020026020010151600001819052506000856040516124df91906155c1565b908152602001604051809103902060050160008281526020019081526020016000206001015467ffffffffffffffff81111561251e5761251d614109565b5b60405190808252806020026020018201604052801561255757816020015b612544614020565b81526020019060019003908161253c5790505b508260008151811061256c5761256b6158b6565b5b60200260200101516020018190525060005b60008660405161258e91906155c1565b90815260200160405180910390206005016000838152602001908152602001600020600101548110156127f4576000866040516125cb91906155c1565b908152602001604051809103902060050160008381526020019081526020016000206002016000828152602001908152602001600020600001805461260f90615607565b80601f016020809104026020016040519081016040528092919081815260200182805461263b90615607565b80156126885780601f1061265d57610100808354040283529160200191612688565b820191906000526020600020905b81548152906001019060200180831161266b57829003601f168201915b5050505050836000815181106126a1576126a06158b6565b5b60200260200101516020015182815181106126bf576126be6158b6565b5b6020026020010151600001819052506000866040516126de91906155c1565b908152602001604051809103902060050160008381526020019081526020016000206002016000828152602001908152602001600020600101805461272290615607565b80601f016020809104026020016040519081016040528092919081815260200182805461274e90615607565b801561279b5780601f106127705761010080835404028352916020019161279b565b820191906000526020600020905b81548152906001019060200180831161277e57829003601f168201915b5050505050836000815181106127b4576127b36158b6565b5b60200260200101516020015182815181106127d2576127d16158b6565b5b60200260200101516020018190525080806127ec90615914565b91505061257e565b505b808061280190615914565b9150506123b6565b508060008151811061281e5761281d6158b6565b5b602002602001015191505092915050565b612837613319565b61284057600080fd5b6040518060400160405280600881526020017f617070726f76656400000000000000000000000000000000000000000000000081525060008360405161288691906155c1565b9081526020016040518091039020600701600083815260200190815260200160002060020160040190816128ba91906157e4565b505050565b6128c7614090565b6128cf613319565b6128d857600080fd5b6128e0614090565b6000846040516128f091906155c1565b90815260200160405180910390206007016000848152602001908152602001600020600201600101805461292390615607565b80601f016020809104026020016040519081016040528092919081815260200182805461294f90615607565b801561299c5780601f106129715761010080835404028352916020019161299c565b820191906000526020600020905b81548152906001019060200180831161297f57829003601f168201915b50505050508160200151602001819052506000846040516129bd91906155c1565b9081526020016040518091039020600701600084815260200190815260200160002060020160000180546129f090615607565b80601f0160208091040260200160405190810160405280929190818152602001828054612a1c90615607565b8015612a695780601f10612a3e57610100808354040283529160200191612a69565b820191906000526020600020905b815481529060010190602001808311612a4c57829003601f168201915b5050505050816020015160000181905250600084604051612a8a91906155c1565b908152602001604051809103902060070160008481526020019081526020016000206002016003018054612abd90615607565b80601f0160208091040260200160405190810160405280929190818152602001828054612ae990615607565b8015612b365780601f10612b0b57610100808354040283529160200191612b36565b820191906000526020600020905b815481529060010190602001808311612b1957829003601f168201915b5050505050816020015160600181905250600084604051612b5791906155c1565b908152602001604051809103902060070160008481526020019081526020016000206002016002018054612b8a90615607565b80601f0160208091040260200160405190810160405280929190818152602001828054612bb690615607565b8015612c035780601f10612bd857610100808354040283529160200191612c03565b820191906000526020600020905b815481529060010190602001808311612be657829003601f168201915b5050505050816020015160400181905250600084604051612c2491906155c1565b908152602001604051809103902060070160008481526020019081526020016000206002016004018054612c5790615607565b80601f0160208091040260200160405190810160405280929190818152602001828054612c8390615607565b8015612cd05780601f10612ca557610100808354040283529160200191612cd0565b820191906000526020600020905b815481529060010190602001808311612cb357829003601f168201915b505050505081602001516080018190525060008085604051612cf291906155c1565b908152602001604051809103902060070160008581526020019081526020016000206000015490508067ffffffffffffffff811115612d3457612d33614109565b5b604051908082528060200260200182016040528015612d6d57816020015b612d5a614020565b815260200190600190039081612d525790505b50826000018190525060005b81811015612f8757600086604051612d9191906155c1565b9081526020016040518091039020600701600086815260200190815260200160002060010160008281526020019081526020016000208054612dd290615607565b80601f0160208091040260200160405190810160405280929190818152602001828054612dfe90615607565b8015612e4b5780601f10612e2057610100808354040283529160200191612e4b565b820191906000526020600020905b815481529060010190602001808311612e2e57829003601f168201915b505050505083600001518281518110612e6757612e666158b6565b5b602002602001015160000181905250612f4e86600088604051612e8a91906155c1565b9081526020016040518091039020600701600088815260200190815260200160002060010160008481526020019081526020016000208054612ecb90615607565b80601f0160208091040260200160405190810160405280929190818152602001828054612ef790615607565b8015612f445780601f10612f1957610100808354040283529160200191612f44565b820191906000526020600020905b815481529060010190602001808311612f2757829003601f168201915b5050505050613c09565b83600001518281518110612f6557612f646158b6565b5b6020026020010151602001819052508080612f7f90615914565b915050612d79565b50819250505092915050565b6060612f9d613319565b612fa657600080fd5b6000825167ffffffffffffffff811115612fc357612fc2614109565b5b604051908082528060200260200182016040528015612ffc57816020015b612fe9614020565b815260200190600190039081612fe15790505b50905060005b835181101561330e5760005b60008660405161301e91906155c1565b9081526020016040518091039020600201548110156132fa5761311c60008760405161304a91906155c1565b90815260200160405180910390206003016000838152602001908152602001600020600001805461307a90615607565b80601f01602080910402602001604051908101604052809291908181526020018280546130a690615607565b80156130f35780601f106130c8576101008083540402835291602001916130f3565b820191906000526020600020905b8154815290600101906020018083116130d657829003601f168201915b505050505086848151811061310b5761310a6158b6565b5b60200260200101516000015161390b565b156132e65760008660405161313191906155c1565b90815260200160405180910390206003016000828152602001908152602001600020600001805461316190615607565b80601f016020809104026020016040519081016040528092919081815260200182805461318d90615607565b80156131da5780601f106131af576101008083540402835291602001916131da565b820191906000526020600020905b8154815290600101906020018083116131bd57829003601f168201915b50505050508383815181106131f2576131f16158b6565b5b60200260200101516000018190525060008660405161321191906155c1565b90815260200160405180910390206003016000828152602001908152602001600020600101805461324190615607565b80601f016020809104026020016040519081016040528092919081815260200182805461326d90615607565b80156132ba5780601f1061328f576101008083540402835291602001916132ba565b820191906000526020600020905b81548152906001019060200180831161329d57829003601f168201915b50505050508383815181106132d2576132d16158b6565b5b6020026020010151602001819052506132e7565b5b80806132f290615914565b91505061300e565b50808061330690615914565b915050613002565b508091505092915050565b6000807394618601fe6cb8912b274e5a00453949a57f8c1e90508073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1603613370576001915050613376565b60009150505b90565b60005b81518110156135f8577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8282815181106133b9576133b86158b6565b5b602002602001015160200151146134bd5760008282815181106133df576133de6158b6565b5b6020026020010151602001519050828281518110613400576133ff6158b6565b5b6020026020010151600001516000015160008560405161342091906155c1565b90815260200160405180910390206003016000838152602001908152602001600020600001908161345191906157e4565b50828281518110613465576134646158b6565b5b6020026020010151600001516020015160008560405161348591906155c1565b9081526020016040518091039020600301600083815260200190815260200160002060010190816134b691906157e4565b50506135e5565b600080846040516134ce91906155c1565b90815260200160405180910390206002015490506000846040516134f291906155c1565b9081526020016040518091039020600201600081548092919061351490615914565b919050555082828151811061352c5761352b6158b6565b5b6020026020010151600001516000015160008560405161354c91906155c1565b90815260200160405180910390206003016000838152602001908152602001600020600001908161357d91906157e4565b50828281518110613591576135906158b6565b5b602002602001015160000151602001516000856040516135b191906155c1565b9081526020016040518091039020600301600083815260200190815260200160002060010190816135e291906157e4565b50505b80806135f090615914565b91505061337c565b505050565b60005b8151811015613906577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82828151811061363d5761363c6158b6565b5b6020026020010151602001511461369a5761369583838381518110613665576136646158b6565b5b602002602001015160200151848481518110613684576136836158b6565b5b602002602001015160400151613e2d565b6138f3565b600080846040516136ab91906155c1565b908152602001604051809103902060040160008154809291906136cd90615914565b9190505590508282815181106136e6576136e56158b6565b5b60200260200101516000015160008560405161370291906155c1565b90815260200160405180910390206005016000838152602001908152602001600020600001908161373391906157e4565b50828281518110613747576137466158b6565b5b6020026020010151604001515160008560405161376491906155c1565b908152602001604051809103902060050160008381526020019081526020016000206001018190555060005b8383815181106137a3576137a26158b6565b5b602002602001015160400151518110156138f0578383815181106137ca576137c96158b6565b5b60200260200101516040015181815181106137e8576137e76158b6565b5b60200260200101516000015160008660405161380491906155c1565b908152602001604051809103902060050160008481526020019081526020016000206002016000838152602001908152602001600020600001908161384991906157e4565b5083838151811061385d5761385c6158b6565b5b602002602001015160400151818151811061387b5761387a6158b6565b5b60200260200101516020015160008660405161389791906155c1565b90815260200160405180910390206005016000848152602001908152602001600020600201600083815260200190815260200160002060010190816138dc91906157e4565b5080806138e890615914565b915050613790565b50505b80806138fe90615914565b915050613600565b505050565b6000818051906020012083805190602001200361392b5760019050613930565b600090505b92915050565b600081602001516020015190506000808260405161395491906155c1565b9081526020016040518091039020600601600081548092919061397690615914565b91905055905082602001516000015160008360405161399591906155c1565b9081526020016040518091039020600701600083815260200190815260200160002060020160000190816139c991906157e4565b508260200151602001516000836040516139e391906155c1565b908152602001604051809103902060070160008381526020019081526020016000206002016001019081613a1791906157e4565b50826020015160400151600083604051613a3191906155c1565b908152602001604051809103902060070160008381526020019081526020016000206002016002019081613a6591906157e4565b50826020015160600151600083604051613a7f91906155c1565b908152602001604051809103902060070160008381526020019081526020016000206002016003019081613ab391906157e4565b506040518060400160405280600781526020017f70656e64696e6700000000000000000000000000000000000000000000000000815250600083604051613afa91906155c1565b908152602001604051809103902060070160008381526020019081526020016000206002016004019081613b2e91906157e4565b50826000015151600083604051613b4591906155c1565b908152602001604051809103902060070160008381526020019081526020016000206000018190555060005b836000015151811015613c035783600001518181518110613b9557613b946158b6565b5b6020026020010151600084604051613bad91906155c1565b9081526020016040518091039020600701600084815260200190815260200160002060010160008381526020019081526020016000209081613bef91906157e4565b508080613bfb90615914565b915050613b71565b50505050565b6060613c13613319565b613c1c57600080fd5b60005b600084604051613c2f91906155c1565b908152602001604051809103902060020154811015613ded57613d0f600085604051613c5b91906155c1565b908152602001604051809103902060030160008381526020019081526020016000206000018054613c8b90615607565b80601f0160208091040260200160405190810160405280929190818152602001828054613cb790615607565b8015613d045780601f10613cd957610100808354040283529160200191613d04565b820191906000526020600020905b815481529060010190602001808311613ce757829003601f168201915b50505050508461390b565b15613dda57600084604051613d2491906155c1565b908152602001604051809103902060030160008281526020019081526020016000206001018054613d5490615607565b80601f0160208091040260200160405190810160405280929190818152602001828054613d8090615607565b8015613dcd5780601f10613da257610100808354040283529160200191613dcd565b820191906000526020600020905b815481529060010190602001808311613db057829003601f168201915b5050505050915050613e27565b8080613de590615914565b915050613c1f565b506040518060400160405280600381526020017f4e2f41000000000000000000000000000000000000000000000000000000000081525090505b92915050565b60005b81518110156140005760005b600085604051613e4c91906155c1565b908152602001604051809103902060020154811015613fec57613f5e600086604051613e7891906155c1565b9081526020016040518091039020600501600086815260200190815260200160002060020160008381526020019081526020016000206000018054613ebc90615607565b80601f0160208091040260200160405190810160405280929190818152602001828054613ee890615607565b8015613f355780601f10613f0a57610100808354040283529160200191613f35565b820191906000526020600020905b815481529060010190602001808311613f1857829003601f168201915b5050505050848481518110613f4d57613f4c6158b6565b5b60200260200101516000015161390b565b15613fd957828281518110613f7657613f756158b6565b5b602002602001015160200151600086604051613f9291906155c1565b9081526020016040518091039020600501600086815260200190815260200160002060020160008381526020019081526020016000206001019081613fd791906157e4565b505b8080613fe490615914565b915050613e3c565b508080613ff890615914565b915050613e30565b50505050565b604051806040016040528060608152602001606081525090565b604051806040016040528060608152602001606081525090565b6040518060c001604052806060815260200160008152602001606081526020016060815260200160608152602001606081525090565b60405180604001604052806060815260200161408a6140b0565b81525090565b6040518060400160405280606081526020016140aa6140b0565b81525090565b6040518060a0016040528060608152602001606081526020016060815260200160608152602001606081525090565b6000604051905090565b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b614141826140f8565b810181811067ffffffffffffffff821117156141605761415f614109565b5b80604052505050565b60006141736140df565b905061417f8282614138565b919050565b600080fd5b600080fd5b600080fd5b600067ffffffffffffffff8211156141ae576141ad614109565b5b6141b7826140f8565b9050602081019050919050565b82818337600083830152505050565b60006141e66141e184614193565b614169565b9050828152602081018484840111156142025761420161418e565b5b61420d8482856141c4565b509392505050565b600082601f83011261422a57614229614189565b5b813561423a8482602086016141d3565b91505092915050565b600067ffffffffffffffff82111561425e5761425d614109565b5b602082029050602081019050919050565b600080fd5b60006040828403121561428a576142896140f3565b5b6142946040614169565b9050600082013567ffffffffffffffff8111156142b4576142b3614184565b5b6142c084828501614215565b600083015250602082013567ffffffffffffffff8111156142e4576142e3614184565b5b6142f084828501614215565b60208301525092915050565b6000819050919050565b61430f816142fc565b811461431a57600080fd5b50565b60008135905061432c81614306565b92915050565b600060408284031215614348576143476140f3565b5b6143526040614169565b9050600082013567ffffffffffffffff81111561437257614371614184565b5b61437e84828501614274565b60008301525060206143928482850161431d565b60208301525092915050565b60006143b16143ac84614243565b614169565b905080838252602082019050602084028301858111156143d4576143d361426f565b5b835b8181101561441b57803567ffffffffffffffff8111156143f9576143f8614189565b5b8086016144068982614332565b855260208501945050506020810190506143d6565b5050509392505050565b600082601f83011261443a57614439614189565b5b813561444a84826020860161439e565b91505092915050565b600067ffffffffffffffff82111561446e5761446d614109565b5b602082029050602081019050919050565b600067ffffffffffffffff82111561449a57614499614109565b5b602082029050602081019050919050565b60006144be6144b98461447f565b614169565b905080838252602082019050602084028301858111156144e1576144e061426f565b5b835b8181101561452857803567ffffffffffffffff81111561450657614505614189565b5b8086016145138982614274565b855260208501945050506020810190506144e3565b5050509392505050565b600082601f83011261454757614546614189565b5b81356145578482602086016144ab565b91505092915050565b600060608284031215614576576145756140f3565b5b6145806060614169565b9050600082013567ffffffffffffffff8111156145a05761459f614184565b5b6145ac84828501614215565b60008301525060206145c08482850161431d565b602083015250604082013567ffffffffffffffff8111156145e4576145e3614184565b5b6145f084828501614532565b60408301525092915050565b600061460f61460a84614453565b614169565b905080838252602082019050602084028301858111156146325761463161426f565b5b835b8181101561467957803567ffffffffffffffff81111561465757614656614189565b5b8086016146648982614560565b85526020850194505050602081019050614634565b5050509392505050565b600082601f83011261469857614697614189565b5b81356146a88482602086016145fc565b91505092915050565b6000606082840312156146c7576146c66140f3565b5b6146d16060614169565b9050600082013567ffffffffffffffff8111156146f1576146f0614184565b5b6146fd84828501614215565b600083015250602082013567ffffffffffffffff81111561472157614720614184565b5b61472d84828501614425565b602083015250604082013567ffffffffffffffff81111561475157614750614184565b5b61475d84828501614683565b60408301525092915050565b60006020828403121561477f5761477e6140e9565b5b600082013567ffffffffffffffff81111561479d5761479c6140ee565b5b6147a9848285016146b1565b91505092915050565b6000819050919050565b6147c5816147b2565b81146147d057600080fd5b50565b6000813590506147e2816147bc565b92915050565b600080604083850312156147ff576147fe6140e9565b5b600083013567ffffffffffffffff81111561481d5761481c6140ee565b5b61482985828601614215565b925050602061483a858286016147d3565b9150509250929050565b6000806040838503121561485b5761485a6140e9565b5b600083013567ffffffffffffffff811115614879576148786140ee565b5b61488585828601614215565b925050602083013567ffffffffffffffff8111156148a6576148a56140ee565b5b6148b285828601614215565b9150509250929050565b600081519050919050565b600082825260208201905092915050565b60005b838110156148f65780820151818401526020810190506148db565b83811115614905576000848401525b50505050565b6000614916826148bc565b61492081856148c7565b93506149308185602086016148d8565b614939816140f8565b840191505092915050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000604083016000830151848203600086015261498d828261490b565b915050602083015184820360208601526149a7828261490b565b9150508091505092915050565b60006149c08383614970565b905092915050565b6000602082019050919050565b60006149e082614944565b6149ea818561494f565b9350836020820285016149fc85614960565b8060005b85811015614a385784840389528151614a1985826149b4565b9450614a24836149c8565b925060208a01995050600181019050614a00565b50829750879550505050505092915050565b60006040830160008301518482036000860152614a67828261490b565b91505060208301518482036020860152614a8182826149d5565b9150508091505092915050565b60006020820190508181036000830152614aa88184614a4a565b905092915050565b600067ffffffffffffffff821115614acb57614aca614109565b5b602082029050602081019050919050565b6000614aef614aea84614ab0565b614169565b90508083825260208201905060208402830185811115614b1257614b1161426f565b5b835b81811015614b5957803567ffffffffffffffff811115614b3757614b36614189565b5b808601614b448982614215565b85526020850194505050602081019050614b14565b5050509392505050565b600082601f830112614b7857614b77614189565b5b8135614b88848260208601614adc565b91505092915050565b600060a08284031215614ba757614ba66140f3565b5b614bb160a0614169565b9050600082013567ffffffffffffffff811115614bd157614bd0614184565b5b614bdd84828501614215565b600083015250602082013567ffffffffffffffff811115614c0157614c00614184565b5b614c0d84828501614215565b602083015250604082013567ffffffffffffffff811115614c3157614c30614184565b5b614c3d84828501614215565b604083015250606082013567ffffffffffffffff811115614c6157614c60614184565b5b614c6d84828501614215565b606083015250608082013567ffffffffffffffff811115614c9157614c90614184565b5b614c9d84828501614215565b60808301525092915050565b600060408284031215614cbf57614cbe6140f3565b5b614cc96040614169565b9050600082013567ffffffffffffffff811115614ce957614ce8614184565b5b614cf584828501614b63565b600083015250602082013567ffffffffffffffff811115614d1957614d18614184565b5b614d2584828501614b91565b60208301525092915050565b600060208284031215614d4757614d466140e9565b5b600082013567ffffffffffffffff811115614d6557614d646140ee565b5b614d7184828501614ca9565b91505092915050565b600060208284031215614d9057614d8f6140e9565b5b600082013567ffffffffffffffff811115614dae57614dad6140ee565b5b614dba84828501614215565b91505092915050565b614dcc816147b2565b82525050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60006040830160008301518482036000860152614e1b828261490b565b91505060208301518482036020860152614e3582826149d5565b9150508091505092915050565b6000614e4e8383614dfe565b905092915050565b6000602082019050919050565b6000614e6e82614dd2565b614e788185614ddd565b935083602082028501614e8a85614dee565b8060005b85811015614ec65784840389528151614ea78582614e42565b9450614eb283614e56565b925060208a01995050600181019050614e8e565b50829750879550505050505092915050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000614f3c838361490b565b905092915050565b6000602082019050919050565b6000614f5c82614f04565b614f668185614f0f565b935083602082028501614f7885614f20565b8060005b85811015614fb45784840389528151614f958582614f30565b9450614fa083614f44565b925060208a01995050600181019050614f7c565b50829750879550505050505092915050565b600060a0830160008301518482036000860152614fe3828261490b565b91505060208301518482036020860152614ffd828261490b565b91505060408301518482036040860152615017828261490b565b91505060608301518482036060860152615031828261490b565b9150506080830151848203608086015261504b828261490b565b9150508091505092915050565b600060408301600083015184820360008601526150758282614f51565b9150506020830151848203602086015261508f8282614fc6565b9150508091505092915050565b60006150a88383615058565b905092915050565b6000602082019050919050565b60006150c882614ed8565b6150d28185614ee3565b9350836020820285016150e485614ef4565b8060005b858110156151205784840389528151615101858261509c565b945061510c836150b0565b925060208a019950506001810190506150e8565b50829750879550505050505092915050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000604083016000830151848203600086015261517b82826149d5565b915050602083015184820360208601526151958282614fc6565b9150508091505092915050565b60006151ae838361515e565b905092915050565b6000602082019050919050565b60006151ce82615132565b6151d8818561513d565b9350836020820285016151ea8561514e565b8060005b85811015615226578484038952815161520785826151a2565b9450615212836151b6565b925060208a019950506001810190506151ee565b50829750879550505050505092915050565b600060c0830160008301518482036000860152615255828261490b565b915050602083015161526a6020860182614dc3565b506040830151848203604086015261528282826149d5565b9150506060830151848203606086015261529c8282614e63565b915050608083015184820360808601526152b682826150bd565b91505060a083015184820360a08601526152d082826151c3565b9150508091505092915050565b600060208201905081810360008301526152f78184615238565b905092915050565b600060408284031215615315576153146140f3565b5b61531f6040614169565b9050600082013567ffffffffffffffff81111561533f5761533e614184565b5b61534b84828501614532565b600083015250602082013567ffffffffffffffff81111561536f5761536e614184565b5b61537b84828501614b91565b60208301525092915050565b6000806040838503121561539e5761539d6140e9565b5b600083013567ffffffffffffffff8111156153bc576153bb6140ee565b5b6153c885828601614215565b925050602083013567ffffffffffffffff8111156153e9576153e86140ee565b5b6153f5858286016152ff565b9150509250929050565b6000604083016000830151848203600086015261541c82826149d5565b915050602083015184820360208601526154368282614fc6565b9150508091505092915050565b6000602082019050818103600083015261545d81846153ff565b905092915050565b6000806040838503121561547c5761547b6140e9565b5b600083013567ffffffffffffffff81111561549a576154996140ee565b5b6154a685828601614215565b925050602083013567ffffffffffffffff8111156154c7576154c66140ee565b5b6154d385828601614532565b9150509250929050565b600082825260208201905092915050565b60006154f982614944565b61550381856154dd565b93508360208202850161551585614960565b8060005b85811015615551578484038952815161553285826149b4565b945061553d836149c8565b925060208a01995050600181019050615519565b50829750879550505050505092915050565b6000602082019050818103600083015261557d81846154ee565b905092915050565b600081905092915050565b600061559b826148bc565b6155a58185615585565b93506155b58185602086016148d8565b80840191505092915050565b60006155cd8284615590565b915081905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061561f57607f821691505b602082108103615632576156316155d8565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b60006008830261569a7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8261565d565b6156a4868361565d565b95508019841693508086168417925050509392505050565b6000819050919050565b60006156e16156dc6156d7846147b2565b6156bc565b6147b2565b9050919050565b6000819050919050565b6156fb836156c6565b61570f615707826156e8565b84845461566a565b825550505050565b600090565b615724615717565b61572f8184846156f2565b505050565b5b818110156157535761574860008261571c565b600181019050615735565b5050565b601f8211156157985761576981615638565b6157728461564d565b81016020851015615781578190505b61579561578d8561564d565b830182615734565b50505b505050565b600082821c905092915050565b60006157bb6000198460080261579d565b1980831691505092915050565b60006157d483836157aa565b9150826002028217905092915050565b6157ed826148bc565b67ffffffffffffffff81111561580657615805614109565b5b6158108254615607565b61581b828285615757565b600060209050601f83116001811461584e576000841561583c578287015190505b61584685826157c8565b8655506158ae565b601f19841661585c86615638565b60005b828110156158845784890151825560018201915060208501945060208101905061585f565b868310156158a1578489015161589d601f8916826157aa565b8355505b6001600288020188555050505b505050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061591f826147b2565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203615951576159506158e5565b5b600182019050919050565b6000615967826147b2565b9150615972836147b2565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156159a7576159a66158e5565b5b82820190509291505056fea26469706673582212202daaeae54231fa8c889fb24efabc876d21d496d1254199c08edc53ca64068d1764736f6c634300080f0033";
        public UserDataContractDeploymentBase() : base(BYTECODE) { }
        public UserDataContractDeploymentBase(string byteCode) : base(byteCode) { }

    }

    public partial class ApproveTransactionStageAFunction : ApproveTransactionStageAFunctionBase { }

    [Function("approveTransactionStageA")]
    public class ApproveTransactionStageAFunctionBase : FunctionMessage
    {
        [Parameter("string", "_id", 1)]
        public virtual string Id { get; set; }
        [Parameter("uint256", "index", 2)]
        public virtual BigInteger Index { get; set; }
    }

    public partial class ApproveTransactionStageBFunction : ApproveTransactionStageBFunctionBase { }

    [Function("approveTransactionStageB", typeof(ApproveTransactionStageBOutputDTO))]
    public class ApproveTransactionStageBFunctionBase : FunctionMessage
    {
        [Parameter("string", "_id", 1)]
        public virtual string Id { get; set; }
        [Parameter("uint256", "index", 2)]
        public virtual BigInteger Index { get; set; }
    }

    public partial class ApproveTransactionStageCFunction : ApproveTransactionStageCFunctionBase { }

    [Function("approveTransactionStageC")]
    public class ApproveTransactionStageCFunctionBase : FunctionMessage
    {
        [Parameter("string", "_id", 1)]
        public virtual string Id { get; set; }
        [Parameter("tuple", "transaction", 2)]
        public virtual TransactionResponse Transaction { get; set; }
    }

    public partial class CreateUserFunction : CreateUserFunctionBase { }

    [Function("createUser")]
    public class CreateUserFunctionBase : FunctionMessage
    {
        [Parameter("string", "_id", 1)]
        public virtual string Id { get; set; }
    }

    public partial class DeclineTransactionFunction : DeclineTransactionFunctionBase { }

    [Function("declineTransaction")]
    public class DeclineTransactionFunctionBase : FunctionMessage
    {
        [Parameter("string", "_id", 1)]
        public virtual string Id { get; set; }
        [Parameter("uint256", "index", 2)]
        public virtual BigInteger Index { get; set; }
    }

    public partial class GetAttributesTransactionFunction : GetAttributesTransactionFunctionBase { }

    [Function("getAttributesTransaction", typeof(GetAttributesTransactionOutputDTO))]
    public class GetAttributesTransactionFunctionBase : FunctionMessage
    {
        [Parameter("string", "_id", 1)]
        public virtual string Id { get; set; }
        [Parameter("tuple[]", "attributes", 2)]
        public virtual List<Attribute> Attributes { get; set; }
    }

    public partial class GetCredentialFunction : GetCredentialFunctionBase { }

    [Function("getCredential", typeof(GetCredentialOutputDTO))]
    public class GetCredentialFunctionBase : FunctionMessage
    {
        [Parameter("string", "id", 1)]
        public virtual string Id { get; set; }
        [Parameter("string", "organization", 2)]
        public virtual string Organization { get; set; }
    }

    public partial class GetCredentialTransactionFunction : GetCredentialTransactionFunctionBase { }

    [Function("getCredentialTransaction", typeof(GetCredentialTransactionOutputDTO))]
    public class GetCredentialTransactionFunctionBase : FunctionMessage
    {
        [Parameter("string", "_id", 1)]
        public virtual string Id { get; set; }
        [Parameter("string", "organization", 2)]
        public virtual string Organization { get; set; }
    }

    public partial class GetUserDataFunction : GetUserDataFunctionBase { }

    [Function("getUserData", typeof(GetUserDataOutputDTO))]
    public class GetUserDataFunctionBase : FunctionMessage
    {
        [Parameter("string", "_id", 1)]
        public virtual string Id { get; set; }
    }

    public partial class NewTransactionRequestFunction : NewTransactionRequestFunctionBase { }

    [Function("newTransactionRequest")]
    public class NewTransactionRequestFunctionBase : FunctionMessage
    {
        [Parameter("tuple", "request", 1)]
        public virtual TransactionRequest Request { get; set; }
    }

    public partial class StringToBytes32Function : StringToBytes32FunctionBase { }

    [Function("stringToBytes32", "bytes32")]
    public class StringToBytes32FunctionBase : FunctionMessage
    {
        [Parameter("string", "source", 1)]
        public virtual string Source { get; set; }
    }

    public partial class UpdateBalanceFunction : UpdateBalanceFunctionBase { }

    [Function("updateBalance")]
    public class UpdateBalanceFunctionBase : FunctionMessage
    {
        [Parameter("string", "_id", 1)]
        public virtual string Id { get; set; }
        [Parameter("uint256", "amount", 2)]
        public virtual BigInteger Amount { get; set; }
    }

    public partial class UpdateUserFunction : UpdateUserFunctionBase { }

    [Function("updateUser")]
    public class UpdateUserFunctionBase : FunctionMessage
    {
        [Parameter("tuple", "update", 1)]
        public virtual Update Update { get; set; }
    }



    public partial class ApproveTransactionStageBOutputDTO : ApproveTransactionStageBOutputDTOBase { }

    [FunctionOutput]
    public class ApproveTransactionStageBOutputDTOBase : IFunctionOutputDTO
    {
        [Parameter("tuple", "", 1)]
        public virtual TransactionResponse ReturnValue1 { get; set; }
    }







    public partial class GetAttributesTransactionOutputDTO : GetAttributesTransactionOutputDTOBase { }

    [FunctionOutput]
    public class GetAttributesTransactionOutputDTOBase : IFunctionOutputDTO
    {
        [Parameter("tuple[]", "", 1)]
        public virtual List<Attribute> ReturnValue1 { get; set; }
    }

    public partial class GetCredentialOutputDTO : GetCredentialOutputDTOBase { }

    [FunctionOutput]
    public class GetCredentialOutputDTOBase : IFunctionOutputDTO
    {
        [Parameter("tuple", "", 1)]
        public virtual CredentialResponse ReturnValue1 { get; set; }
    }

    public partial class GetCredentialTransactionOutputDTO : GetCredentialTransactionOutputDTOBase { }

    [FunctionOutput]
    public class GetCredentialTransactionOutputDTOBase : IFunctionOutputDTO
    {
        [Parameter("tuple", "", 1)]
        public virtual CredentialResponse ReturnValue1 { get; set; }
    }

    public partial class GetUserDataOutputDTO : GetUserDataOutputDTOBase { }

    [FunctionOutput]
    public class GetUserDataOutputDTOBase : IFunctionOutputDTO
    {
        [Parameter("tuple", "", 1)]
        public virtual UserDataResponse ReturnValue1 { get; set; }
    }



    public partial class StringToBytes32OutputDTO : StringToBytes32OutputDTOBase { }

    [FunctionOutput]
    public class StringToBytes32OutputDTOBase : IFunctionOutputDTO
    {
        [Parameter("bytes32", "result", 1)]
        public virtual byte[] Result { get; set; }
    }





    public partial class Attribute : AttributeBase { }

    public class AttributeBase
    {
        [Parameter("string", "name", 1)]
        public virtual string Name { get; set; }
        [Parameter("string", "value", 2)]
        public virtual string Value { get; set; }
    }

    public partial class TransactionStamp : TransactionStampBase { }

    public class TransactionStampBase
    {
        [Parameter("string", "fromID", 1)]
        public virtual string FromID { get; set; }
        [Parameter("string", "toID", 2)]
        public virtual string ToID { get; set; }
        [Parameter("string", "date", 3)]
        public virtual string Date { get; set; }
        [Parameter("string", "message", 4)]
        public virtual string Message { get; set; }
        [Parameter("string", "status", 5)]
        public virtual string Status { get; set; }
    }

    public partial class TransactionResponse : TransactionResponseBase { }

    public class TransactionResponseBase
    {
        [Parameter("tuple[]", "attributes", 1)]
        public virtual List<Attribute> Attributes { get; set; }
        [Parameter("tuple", "stamp", 2)]
        public virtual TransactionStamp Stamp { get; set; }
    }

    public partial class CredentialResponse : CredentialResponseBase { }

    public class CredentialResponseBase
    {
        [Parameter("string", "organization", 1)]
        public virtual string Organization { get; set; }
        [Parameter("tuple[]", "attributes", 2)]
        public virtual List<Attribute> Attributes { get; set; }
    }

    public partial class TransactionRequest : TransactionRequestBase { }

    public class TransactionRequestBase
    {
        [Parameter("string[]", "attributes", 1)]
        public virtual List<string> Attributes { get; set; }
        [Parameter("tuple", "stamp", 2)]
        public virtual TransactionStamp Stamp { get; set; }
    }

    public partial class UserDataResponse : UserDataResponseBase { }

    public class UserDataResponseBase
    {
        [Parameter("string", "id", 1)]
        public virtual string Id { get; set; }
        [Parameter("uint256", "balance", 2)]
        public virtual BigInteger Balance { get; set; }
        [Parameter("tuple[]", "attributes", 3)]
        public virtual List<Attribute> Attributes { get; set; }
        [Parameter("tuple[]", "credentials", 4)]
        public virtual List<CredentialResponse> Credentials { get; set; }
        [Parameter("tuple[]", "transactionRequests", 5)]
        public virtual List<TransactionRequest> TransactionRequests { get; set; }
        [Parameter("tuple[]", "approvedTransactions", 6)]
        public virtual List<TransactionResponse> ApprovedTransactions { get; set; }
    }

    public partial class AttributeUpdate : AttributeUpdateBase { }

    public class AttributeUpdateBase
    {
        [Parameter("tuple", "attribute", 1)]
        public virtual Attribute Attribute { get; set; }
        [Parameter("int256", "index", 2)]
        public virtual BigInteger Index { get; set; }
    }

    public partial class CredentialUpdate : CredentialUpdateBase { }

    public class CredentialUpdateBase
    {
        [Parameter("string", "organization", 1)]
        public virtual string Organization { get; set; }
        [Parameter("int256", "index", 2)]
        public virtual BigInteger Index { get; set; }
        [Parameter("tuple[]", "attributes", 3)]
        public virtual List<Attribute> Attributes { get; set; }
    }

    public partial class Update : UpdateBase { }

    public class UpdateBase
    {
        [Parameter("string", "id", 1)]
        public virtual string Id { get; set; }
        [Parameter("tuple[]", "attributes", 2)]
        public virtual List<AttributeUpdate> Attributes { get; set; }
        [Parameter("tuple[]", "credentials", 3)]
        public virtual List<CredentialUpdate> Credentials { get; set; }
    }


    public partial class AttributeUpdateGen2 : AttributeUpdateBaseGen2 { }

    public class AttributeUpdateBaseGen2
    {
        [Parameter("tuple", "attribute", 1)]
        public virtual Attribute Attribute { get; set; }
        [Parameter("int256", "index", 2)]
        public virtual int Index { get; set; }
    }



    public partial class CredentialUpdateGen2 : CredentialUpdateBaseGen2 { }

    public class CredentialUpdateBaseGen2
    {
        [Parameter("string", "organization", 1)]
        public virtual string Organization { get; set; }
        [Parameter("int256", "index", 2)]
        public virtual int Index { get; set; }
        [Parameter("tuple[]", "attributes", 3)]
        public virtual List<Attribute> Attributes { get; set; }
    }



    public partial class UpdateGen2 : UpdateBaseGen2 { }

    public class UpdateBaseGen2
    {
        [Parameter("string", "id", 1)]
        public virtual string Id { get; set; }
        [Parameter("tuple[]", "attributes", 2)]
        public virtual List<AttributeUpdateGen2> Attributes { get; set; }
        [Parameter("tuple[]", "credentials", 3)]
        public virtual List<CredentialUpdateGen2> Credentials { get; set; }
    }



}
